"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6260],{6260:(q,_,c)=>{c.r(_),c.d(_,{HomePageModule:()=>F});var f=c(6814),i=c(1929),l=c(95),h=c(4934),x=c(5861),e=c(9212),Z=c(7385);function P(t,s){1&t&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un nombre v\xe1lido. "),e.qZA())}function A(t,s){1&t&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un apellido v\xe1lido. "),e.qZA())}function k(t,s){1&t&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un rut v\xe1lido. "),e.qZA())}function I(t,s){1&t&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa una patente v\xe1lida. "),e.qZA())}function b(t,s){1&t&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un n\xfamero de tel\xe9fono v\xe1lido. "),e.qZA())}function C(t,s){if(1&t&&(e.TgZ(0,"ion-select-option",16),e._uU(1),e.qZA()),2&t){const p=s.$implicit;e.Q6J("value",p.numero),e.xp6(1),e.hij(" ",p.numero," ")}}const y=[{path:"",component:(()=>{var t;class s{constructor(o,n,a,r){this.parkingService=o,this.alertController=n,this.router=a,this.formBuilder=r,this.estacionamientos=[],this.rutValidator=u=>this.validarRut(u.value)?null:{rutInvalido:!0},this.estacionamientoForm=this.formBuilder.group({numero:["",l.kI.required],disponible:[!1],tipo:[!1,l.kI.required],patente:["",l.kI.required],nombres:["",[l.kI.required,l.kI.minLength(3)]],apellidos:["",[l.kI.required,l.kI.minLength(4)]],rut:["",[l.kI.required,this.rutValidator]],dv:[[l.kI.required]],telefono:["+56 9",[l.kI.required,l.kI.pattern(/^\+56 9\d{8}$/)]]})}ngOnInit(){this.getParking()}getParking(){this.parkingService.getParkingData().subscribe(o=>{this.estacionamientos=o,this.estacionamientos=this.estacionamientos.filter(n=>!0===n.disponible),console.log(this.estacionamientos)})}parkingRegister(){const o={...this.estacionamientoForm.value};let n=o.telefono;n=n.replace("+56 9","").replace(/\s/g,""),o.telefono=n;const r=o.rut.split("-");if(2===r.length){let m=r[1];o.rut=r[0],o.dv=m}console.log(o),this.parkingService.updateParking(o)}validarDigitoVerificador(o,n){return n===this.calcularDigitoVerificador(o)}validarRut(o){if(!o||!/^\d{7,8}-[kK\d]$/.test(o))return!1;const[a,r]=o.split("-");let u=0,m=2;for(let v=a.length-1;v>=0;v--)u+=m*parseInt(a.charAt(v),10),m=m<7?m+1:2;let d,g=11-u%11;return d=10===g?"k":11===g?"0":g.toString(),r.toLowerCase()===d}calcularDigitoVerificador(o){let n=0,a=2;for(let u=o.length-1;u>=0;u--)n+=parseInt(o.charAt(u),10)*a,a=a<7?a+1:2;const r=11-n%11;return 11===r?"0":10===r?"k":r.toString()}mostrarAlerta(o){var n=this;return(0,x.Z)(function*(){yield(yield n.alertController.create({header:"Alerta",message:o,buttons:["OK"]})).present()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(Z.N),e.Y36(i.Br),e.Y36(h.F0),e.Y36(l.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-home"]],decls:41,vars:8,consts:[[2,"text-align","center"],[1,"ion-padding"],[1,"registro-card",2,"margin-top","10%"],[3,"formGroup"],["position","floating",1,"label"],["formControlName","nombres","minlength","3","name","fullName","type","text","placeholder","Ejemplo: Juan P\xe9rez",1,"input"],["color","danger","style","display: block; margin-left: 10px;",4,"ngIf"],["formControlName","apellidos","name","apellidos","type","text","placeholder","Ejemplo: Juan P\xe9rez",1,"input"],["formControlName","rut","name","rut","type","text","placeholder","Ejemplo: 123456789-k",1,"input"],["formControlName","patente","name","apellidos","type","text",1,"input"],["formControlName","telefono","name","telefono","type","tel",1,"input"],["formControlName","numero","name","numero","placeholder","Selecciona un estacionamiento",1,"select","select-placeholder","select-custom"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tipo","slot","start"],["shape","round","expand","block",1,"boton",3,"disabled","click"],["color","danger",2,"display","block","margin-left","10px"],[3,"value"]],template:function(o,n){if(1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3," Registro de Estacionamientos "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-card",2)(6,"ion-card-content",3)(7,"ion-item")(8,"ion-label",4),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"ion-input",5),e.qZA(),e.YNc(11,P,2,0,"ion-text",6),e.TgZ(12,"ion-item")(13,"ion-label",4),e._uU(14,"Apellido"),e.qZA(),e._UZ(15,"ion-input",7),e.qZA(),e.YNc(16,A,2,0,"ion-text",6),e.TgZ(17,"ion-item")(18,"ion-label",4),e._uU(19,"Rut"),e.qZA(),e._UZ(20,"ion-input",8),e.qZA(),e.YNc(21,k,2,0,"ion-text",6),e.TgZ(22,"ion-item")(23,"ion-label",4),e._uU(24,"Patente"),e.qZA(),e._UZ(25,"ion-input",9),e.qZA(),e.YNc(26,I,2,0,"ion-text",6),e.TgZ(27,"ion-item")(28,"ion-label",4),e._uU(29,"N\xfamero de Tel\xe9fono"),e.qZA(),e._UZ(30,"ion-input",10),e.qZA(),e.YNc(31,b,2,0,"ion-text",6),e.TgZ(32,"ion-item")(33,"ion-select",11),e.YNc(34,C,2,2,"ion-select-option",12),e.qZA()(),e.TgZ(35,"ion-item")(36,"ion-label"),e._uU(37,"Moto"),e.qZA(),e._UZ(38,"ion-checkbox",13),e.qZA(),e.TgZ(39,"ion-button",14),e.NdJ("click",function(){return n.parkingRegister()}),e._uU(40," Registrar Uso "),e.qZA()()()()),2&o){let a,r,u,m,g;e.xp6(6),e.Q6J("formGroup",n.estacionamientoForm),e.xp6(5),e.Q6J("ngIf",(null==(a=n.estacionamientoForm.get("nombres"))?null:a.invalid)&&(null==(a=n.estacionamientoForm.get("nombres"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",(null==(r=n.estacionamientoForm.get("apellidos"))?null:r.invalid)&&(null==(r=n.estacionamientoForm.get("apellidos"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(u=n.estacionamientoForm.get("rut"))?null:u.invalid)&&(null==(u=n.estacionamientoForm.get("telefono"))?null:u.touched)),e.xp6(5),e.Q6J("ngIf",(null==(m=n.estacionamientoForm.get("patente"))?null:m.invalid)&&(null==(m=n.estacionamientoForm.get("patente"))?null:m.touched)),e.xp6(5),e.Q6J("ngIf",(null==(g=n.estacionamientoForm.get("telefono"))?null:g.invalid)&&(null==(g=n.estacionamientoForm.get("telefono"))?null:g.touched)),e.xp6(3),e.Q6J("ngForOf",n.estacionamientos),e.xp6(5),e.Q6J("disabled",n.estacionamientoForm.invalid)}},dependencies:[f.sg,f.O5,l.JJ,l.JL,l.wO,i.YG,i.PM,i.FN,i.nz,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.t9,i.n0,i.yW,i.wd,i.sr,i.w,i.QI,i.j9,l.sg,l.u],styles:["#fondo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;top:250px;position:relative;opacity:.4}#fondo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:140px}#fondo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}.text-validation[_ngcontent-%COMP%]{display:block;margin-left:16px}ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:15px}ion-item[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:15px}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:15px}ion-text[_ngcontent-%COMP%]{position:relative;top:-5px;font-size:.75em}.select-placeholder[_ngcontent-%COMP%]{--placeholder-color: #ffffff;--placeholder-opacity: 1}.select-custom[_ngcontent-%COMP%]{--padding-end: 5px}"]}),s})()}];let T=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(y),h.Bz]}),s})(),F=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,l.u5,i.Pc,T,l.UX]}),s})()}}]);